import os

FILE_CONTEXT_START = """#include<stdio.h>
#include<string.h>

"""
FILE_CONTEXT_END = """int main(int argc, char** argv){
    char *str_a = argv[1];
    char *str_b = argv[2];
    printf("%d", compare(str_a, str_b));
    return 0;
}

"""

FILE_CONTEXT_END_2 = """int main(int argc, char** argv){
    const char *str_a = argv[1];
    const char *str_b = argv[2];
    printf("%d", CRYPTO_memcmp(str_a, str_b, strlen(str_a)));
    return 0;
}

"""

# path for template files for string comparison
path = "templates/"
for filename in os.listdir(path):
    with open(f"{path}{filename}", "r") as f:
        with open(f"codes/{filename}", "w") as f2:
            # add dependency and main function to the template
            f2.write(FILE_CONTEXT_START + f.read() + FILE_CONTEXT_END)

# path for template files for bytes comparison
path2 = "templates2/"
for filename in os.listdir(path2):
    with open(f"{path2}{filename}", "r") as f:
        with open(f"codes/{filename}", "w") as f2:
            # add dependency and main function to the template
            f2.write(FILE_CONTEXT_START + f.read() + FILE_CONTEXT_END_2)
